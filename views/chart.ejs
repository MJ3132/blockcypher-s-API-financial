<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Transactions Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.bundle.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="/css/chart.css" />   
</head>
<body>
    <form style="display:flex; justify-content:right" action='/' method="GET">
        <button class="coinButton" type="submit">Back to Home</button>
    </form>
    <div class="chart-container">
        <canvas id="myChart"></canvas>

    <form class="form" action='/save' method="POST">
        <label for="payment">Keep track of this address ? </label>
        <input type="hidden" name='address' value=<%= address %> />
        <input type="hidden" name='balance' value=<%= balance %> />
        <input type="hidden" name='totalReceived' value=<%= totalReceived %> />
        <input type="hidden" name='totalSent' value=<%= totalSent %> />
        <input type="hidden" name='finalBalance' value=<%= finalBalance %> />
        <button class="coinButton" type="submit">Save Information</button>
    </form>

    
</div>
</div>

    <script> 
    
    let balance = <%= balance %>;
    let totalReceived = <%= totalReceived %>;
    let totalSent = <%= totalSent %>;
    let finalBalance = <%= finalBalance %>;
    // let transactions = <%= transactions %>;

    // transactions.map(ref => console.log(ref.value));
   console.log(finalBalance);
    let myChart = document.getElementById('myChart').getContext('2d');

    Chart.defaults.global.defaultFontFamily = 'lato';
    //  Chart.defaults.global.defaultFontSize = 18;
      Chart.defaults.global.defaultFontColor = 'black';

    let transactionsChart = new Chart(myChart, {
        type:'bar',
        data:{
            labels:[ 'balance', 'total-received ', 'total-sent ','final-balance '],
            datasets:[{
                label: ['Balance'],
        
                data:[balance,totalReceived,totalSent,finalBalance],

                // data: [transactions],

                backgroundColor:[
                    'gold',
                    'red',
                    'purple',
                    "salmon",
               
            ],
            borderWidth:1,
            borderColor:'#777',
            hoverBorderWidth: 3,
            hoverBorderColor:'#000'

            }]
        },
        options:{ title:{
            display:true,
            text:"Address Information",
            fontSize: 20
        },
        legend:{
            position:'right',
            labels:{
                fontColor: '#000',
                background:"green"
            }
        }
    },
    })
    </script>
</body>
</html>